

### En utilisant le programme Code_Simulation_pour_Intervalle_de_Confiance

## Objectif : calcul des 200 prévalences d'infarctus du myocarde pour les cohortes simulées

# etats : matrice de 10 000 lignes et 61 colonnes. Avec les individus en ligne et les âges de 35 à 95 ans en colonne implémentant les différents états de 0, 1, 2 et 3
# prev : matrice de 61 lignes et 200 colonnes (diffère selon le nombre d'itérations). Avec les âges en ligne et le nombre de cas en colonne (par cohorte et itérations)
# vivants : matrice de 61 lignes et 200 colonnes (diffère selon le nombre d'itérations). Avec les âges en ligne et le nombre de vivant en colonne (par cohorte et itérations)


### Prévalence :

prev <- data.frame(matrix(ncol=201,nrow=61))
prev[,1] <- c(35:95)

for(a in 35:95){                              # boucle sur les âges
  
  print(a)
  
  for(it in 1:200) {                          # boucle sur les itérations
    
    etats <- read.csv(paste("etats",it,sep="_"))
    etats$X <- NULL
    colnames(etats) <- gsub("X","",colnames(etats))
  
    nb = 0
    for(i in 1:nrow(etats)){           # calcul de la prévalence d'infarctus du myocarde
      if(etats[i,a-34]==1 |etats[i,a-34]==3){
        nb <- nb+1
      }
      prev[a-34,it+1] <- nb
    }
  }
  colnames(prev) <- c("age",1:200)
  write.csv(prev,file ="prev_iterations")
}
